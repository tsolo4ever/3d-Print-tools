{
  "_comment": "Marlin Feature Flags Database",
  "_lastUpdated": "2024-12-21",
  
  "featureCategories": {
    "essential": "Required for basic operation",
    "recommended": "Recommended for most users",
    "optional": "Nice to have features",
    "advanced": "For advanced users",
    "experimental": "Experimental/beta features"
  },
  
  "features": {
    "core": {
      "name": "Core Features",
      "features": [
        {
          "define": "EEPROM_SETTINGS",
          "name": "EEPROM Settings Storage",
          "file": "Configuration.h",
          "category": "essential",
          "description": "Save settings to persistent memory",
          "dependencies": [],
          "flashCost": 2500,
          "ramCost": 200,
          "recommendation": "Always enable"
        },
        {
          "define": "HOST_KEEPALIVE_FEATURE",
          "name": "Host Keepalive",
          "file": "Configuration.h",
          "category": "recommended",
          "description": "Send busy status to host during operations",
          "dependencies": [],
          "flashCost": 500,
          "ramCost": 50,
          "options": {
            "DEFAULT_KEEPALIVE_INTERVAL": { "default": 2, "unit": "seconds" }
          },
          "recommendation": "Enable for OctoPrint/host software"
        },
        {
          "define": "EMERGENCY_PARSER",
          "name": "Emergency Parser",
          "file": "Configuration_adv.h",
          "category": "essential",
          "description": "Process M108, M112, M410 even when buffer full",
          "dependencies": [],
          "flashCost": 1500,
          "ramCost": 100,
          "recommendation": "ALWAYS enable - critical safety feature"
        },
        {
          "define": "SDSUPPORT",
          "name": "SD Card Support",
          "file": "Configuration.h",
          "category": "recommended",
          "description": "Print from SD card",
          "dependencies": [],
          "flashCost": 12000,
          "ramCost": 1200,
          "options": {
            "SD_CHECK_AND_RETRY": { "description": "Retry on SD read error" },
            "SDCARD_SORT_ALPHA": { "description": "Sort files alphabetically" },
            "LONG_FILENAME_HOST_SUPPORT": { "description": "Support long filenames" }
          }
        },
        {
          "define": "PRINTCOUNTER",
          "name": "Print Counter",
          "file": "Configuration.h",
          "category": "optional",
          "description": "Track print statistics",
          "dependencies": ["EEPROM_SETTINGS"],
          "flashCost": 1500,
          "ramCost": 100
        }
      ]
    },
    
    "temperature": {
      "name": "Temperature Control",
      "features": [
        {
          "define": "PIDTEMP",
          "name": "PID Temperature Control (Hotend)",
          "file": "Configuration.h",
          "category": "essential",
          "description": "PID control for hotend temperature",
          "dependencies": [],
          "flashCost": 2000,
          "ramCost": 100,
          "options": {
            "DEFAULT_Kp": { "description": "Proportional gain" },
            "DEFAULT_Ki": { "description": "Integral gain" },
            "DEFAULT_Kd": { "description": "Derivative gain" },
            "PID_AUTOTUNE_MENU": { "description": "LCD menu for PID autotune" },
            "PID_EDIT_MENU": { "description": "LCD menu to edit PID values" }
          },
          "alternative": "MPCTEMP (Model Predictive Control)"
        },
        {
          "define": "MPCTEMP",
          "name": "Model Predictive Control (Hotend)",
          "file": "Configuration.h",
          "category": "advanced",
          "description": "MPC temperature control - newer alternative to PID",
          "dependencies": [],
          "flashCost": 4000,
          "ramCost": 200,
          "benefits": [
            "Better response to disturbances",
            "Accounts for heater power and thermal mass",
            "Generally better than PID"
          ],
          "alternative": "PIDTEMP"
        },
        {
          "define": "PIDTEMPBED",
          "name": "PID Temperature Control (Bed)",
          "file": "Configuration.h",
          "category": "recommended",
          "description": "PID control for bed temperature",
          "dependencies": [],
          "flashCost": 1500,
          "ramCost": 100,
          "alternative": "Bang-bang (default if disabled)"
        },
        {
          "define": "THERMAL_PROTECTION_HOTENDS",
          "name": "Thermal Runaway Protection (Hotend)",
          "file": "Configuration.h",
          "category": "essential",
          "description": "Detect and prevent thermal runaway",
          "dependencies": [],
          "flashCost": 1500,
          "ramCost": 50,
          "recommendation": "NEVER disable - fire safety!"
        },
        {
          "define": "THERMAL_PROTECTION_BED",
          "name": "Thermal Runaway Protection (Bed)",
          "file": "Configuration.h",
          "category": "essential",
          "description": "Detect and prevent bed thermal runaway",
          "dependencies": [],
          "flashCost": 1000,
          "ramCost": 50,
          "recommendation": "NEVER disable - fire safety!"
        },
        {
          "define": "PREHEAT_1_LABEL",
          "name": "Preheat Presets",
          "file": "Configuration.h",
          "category": "recommended",
          "description": "Preset preheat temperatures",
          "options": {
            "PREHEAT_1_LABEL": "PLA",
            "PREHEAT_1_TEMP_HOTEND": 200,
            "PREHEAT_1_TEMP_BED": 60,
            "PREHEAT_2_LABEL": "PETG",
            "PREHEAT_2_TEMP_HOTEND": 240,
            "PREHEAT_2_TEMP_BED": 80
          }
        }
      ]
    },
    
    "motion": {
      "name": "Motion Control",
      "features": [
        {
          "define": "S_CURVE_ACCELERATION",
          "name": "S-Curve Acceleration",
          "file": "Configuration.h",
          "category": "optional",
          "description": "Smooth acceleration curves",
          "dependencies": [],
          "flashCost": 2000,
          "ramCost": 100,
          "incompatible": ["LIN_ADVANCE (some issues)"],
          "benefits": ["Smoother motion", "Reduced vibration"],
          "drawbacks": ["May have issues with Linear Advance"]
        },
        {
          "define": "CLASSIC_JERK",
          "name": "Classic Jerk",
          "file": "Configuration.h",
          "category": "optional",
          "description": "Traditional jerk-based motion control",
          "alternative": "JUNCTION_DEVIATION",
          "options": {
            "DEFAULT_XJERK": 10,
            "DEFAULT_YJERK": 10,
            "DEFAULT_ZJERK": 0.3,
            "DEFAULT_EJERK": 5
          }
        },
        {
          "define": "JUNCTION_DEVIATION_MM",
          "name": "Junction Deviation",
          "file": "Configuration.h",
          "category": "recommended",
          "description": "Modern alternative to classic jerk",
          "default": 0.013,
          "benefits": ["More physically accurate", "Better corner handling"],
          "recommendation": "Preferred over classic jerk"
        },
        {
          "define": "LIN_ADVANCE",
          "name": "Linear Advance",
          "file": "Configuration_adv.h",
          "category": "recommended",
          "description": "Compensate for pressure in nozzle/bowden",
          "dependencies": [],
          "flashCost": 2500,
          "ramCost": 100,
          "options": {
            "LIN_ADVANCE_K": { "default": 0, "description": "K factor (0=disabled)" },
            "EXTRA_LIN_ADVANCE_K": { "description": "Second K for different filaments" }
          },
          "incompatible": ["S_CURVE_ACCELERATION (may have issues)"],
          "recommendation": "Enable and calibrate K factor per filament"
        },
        {
          "define": "INPUT_SHAPING_X",
          "name": "Input Shaping",
          "file": "Configuration_adv.h",
          "category": "advanced",
          "description": "Reduce ringing/ghosting artifacts",
          "marlinVersion": "2.1+",
          "flashCost": 8000,
          "ramCost": 1000,
          "options": {
            "SHAPING_FREQ_X": { "description": "X axis frequency (Hz)" },
            "SHAPING_FREQ_Y": { "description": "Y axis frequency (Hz)" },
            "SHAPING_ZETA_X": { "description": "X damping ratio" },
            "SHAPING_ZETA_Y": { "description": "Y damping ratio" }
          },
          "calibration": "Print ringing test, measure frequency"
        },
        {
          "define": "ARC_SUPPORT",
          "name": "Arc Support (G2/G3)",
          "file": "Configuration_adv.h",
          "category": "recommended",
          "description": "Enable arc/circle G-code commands",
          "dependencies": [],
          "flashCost": 3500,
          "ramCost": 200,
          "options": {
            "MM_PER_ARC_SEGMENT": 1,
            "MIN_ARC_SEGMENT_MM": 0.1,
            "MAX_ARC_SEGMENT_MM": 1.0,
            "MIN_CIRCLE_SEGMENTS": 72,
            "N_ARC_CORRECTION": 25
          },
          "recommendation": "Enable for Arc Welder OctoPrint plugin"
        },
        {
          "define": "BABYSTEPPING",
          "name": "Babystepping",
          "file": "Configuration_adv.h",
          "category": "recommended",
          "description": "Real-time Z adjustment during print",
          "dependencies": [],
          "flashCost": 2000,
          "ramCost": 100,
          "options": {
            "DOUBLECLICK_FOR_Z_BABYSTEPPING": { "description": "Double-click encoder for Z babystep" },
            "BABYSTEP_ALWAYS_AVAILABLE": { "description": "Allow babystepping anytime" },
            "BABYSTEP_ZPROBE_OFFSET": { "description": "Combine with probe offset adjustment" }
          }
        }
      ]
    },
    
    "leveling": {
      "name": "Bed Leveling",
      "features": [
        {
          "define": "AUTO_BED_LEVELING_BILINEAR",
          "name": "Bilinear Auto Bed Leveling",
          "file": "Configuration.h",
          "category": "recommended",
          "description": "Most common mesh-based leveling",
          "dependencies": ["Probe or PROBE_MANUALLY"],
          "flashCost": 6000,
          "ramCost": 800,
          "mutuallyExclusive": ["AUTO_BED_LEVELING_3POINT", "AUTO_BED_LEVELING_LINEAR", "AUTO_BED_LEVELING_UBL", "MESH_BED_LEVELING"],
          "options": {
            "GRID_MAX_POINTS_X": { "default": 5, "range": "3-15" },
            "GRID_MAX_POINTS_Y": { "default": 5, "range": "3-15" },
            "EXTRAPOLATE_BEYOND_GRID": { "default": true },
            "ABL_BILINEAR_SUBDIVISION": { "default": false }
          }
        },
        {
          "define": "AUTO_BED_LEVELING_UBL",
          "name": "Unified Bed Leveling",
          "file": "Configuration.h",
          "category": "advanced",
          "description": "Most advanced leveling with mesh storage",
          "dependencies": ["Probe or manual probing", "EEPROM_SETTINGS"],
          "flashCost": 25000,
          "ramCost": 3500,
          "mutuallyExclusive": ["AUTO_BED_LEVELING_3POINT", "AUTO_BED_LEVELING_LINEAR", "AUTO_BED_LEVELING_BILINEAR", "MESH_BED_LEVELING"],
          "benefits": ["Multiple mesh slots", "Advanced editing", "Tilt adjustment"],
          "recommendation": "For advanced users with large beds"
        },
        {
          "define": "MESH_BED_LEVELING",
          "name": "Manual Mesh Bed Leveling",
          "file": "Configuration.h",
          "category": "optional",
          "description": "LCD-guided manual leveling without probe",
          "dependencies": [],
          "flashCost": 5000,
          "ramCost": 500,
          "mutuallyExclusive": ["AUTO_BED_LEVELING_*"],
          "recommendation": "Good option if no probe available"
        },
        {
          "define": "Z_SAFE_HOMING",
          "name": "Safe Z Homing",
          "file": "Configuration.h",
          "category": "recommended",
          "description": "Home Z at center of bed",
          "dependencies": ["Homing uses Z probe or endstop"],
          "flashCost": 500,
          "ramCost": 50,
          "recommendation": "Enable when using probe for Z homing"
        },
        {
          "define": "ENABLE_LEVELING_FADE_HEIGHT",
          "name": "Leveling Fade Height",
          "file": "Configuration.h",
          "category": "recommended",
          "description": "Gradually reduce leveling compensation",
          "options": {
            "DEFAULT_LEVELING_FADE_HEIGHT": { "default": 10, "unit": "mm" }
          }
        },
        {
          "define": "G26_MESH_VALIDATION",
          "name": "G26 Mesh Validation",
          "file": "Configuration.h",
          "category": "optional",
          "description": "Print test pattern to validate mesh",
          "dependencies": ["AUTO_BED_LEVELING_UBL or MESH_BED_LEVELING"],
          "flashCost": 4000,
          "ramCost": 300
        },
        {
          "define": "LCD_BED_LEVELING",
          "name": "LCD Bed Leveling Menu",
          "file": "Configuration.h",
          "category": "recommended",
          "description": "LCD menu for bed leveling",
          "dependencies": ["MESH_BED_LEVELING or AUTO_BED_LEVELING_*"],
          "flashCost": 2500,
          "ramCost": 200
        }
      ]
    },
    
    "probe": {
      "name": "Probe Features",
      "features": [
        {
          "define": "BLTOUCH",
          "name": "BLTouch Support",
          "file": "Configuration.h",
          "category": "recommended",
          "description": "Enable BLTouch/3DTouch/CR Touch",
          "dependencies": [],
          "flashCost": 3500,
          "ramCost": 100,
          "options": {
            "BLTOUCH_DELAY": { "default": 500, "unit": "ms" },
            "BLTOUCH_HS_MODE": { "description": "High speed mode" }
          }
        },
        {
          "define": "FIX_MOUNTED_PROBE",
          "name": "Fixed Mounted Probe",
          "file": "Configuration.h",
          "category": "optional",
          "description": "For inductive/capacitive probes",
          "mutuallyExclusive": ["BLTOUCH", "TOUCH_MI_PROBE"]
        },
        {
          "define": "NOZZLE_AS_PROBE",
          "name": "Nozzle as Probe",
          "file": "Configuration.h",
          "category": "optional",
          "description": "Use nozzle contact as probe",
          "requirements": ["Conductive bed or probe switch"]
        },
        {
          "define": "Z_MIN_PROBE_REPEATABILITY_TEST",
          "name": "Probe Repeatability Test",
          "file": "Configuration.h",
          "category": "optional",
          "description": "M48 command to test probe repeatability",
          "flashCost": 1500,
          "ramCost": 50,
          "recommendation": "Enable to verify probe accuracy"
        },
        {
          "define": "PROBING_HEATERS_OFF",
          "name": "Heaters Off During Probing",
          "file": "Configuration.h",
          "category": "optional",
          "description": "Turn off heaters during probing",
          "benefits": ["Reduces electrical noise"],
          "drawbacks": ["Temperature drops during probing"]
        }
      ]
    },
    
    "filament": {
      "name": "Filament Features",
      "features": [
        {
          "define": "FILAMENT_RUNOUT_SENSOR",
          "name": "Filament Runout Sensor",
          "file": "Configuration.h",
          "category": "recommended",
          "description": "Detect filament runout",
          "dependencies": [],
          "flashCost": 2000,
          "ramCost": 100,
          "options": {
            "FIL_RUNOUT_STATE": { "description": "LOW or HIGH when triggered" },
            "FIL_RUNOUT_PULLUP": { "description": "Use internal pullup" },
            "FILAMENT_RUNOUT_DISTANCE_MM": { "description": "Distance before stopping" }
          }
        },
        {
          "define": "ADVANCED_PAUSE_FEATURE",
          "name": "Advanced Pause / Filament Change",
          "file": "Configuration_adv.h",
          "category": "recommended",
          "description": "M600 filament change support",
          "dependencies": [],
          "flashCost": 6000,
          "ramCost": 500,
          "options": {
            "PAUSE_PARK_RETRACT_FEEDRATE": 60,
            "PAUSE_PARK_RETRACT_LENGTH": 2,
            "FILAMENT_CHANGE_UNLOAD_LENGTH": 100,
            "FILAMENT_CHANGE_LOAD_LENGTH": 100
          }
        },
        {
          "define": "NOZZLE_PARK_FEATURE",
          "name": "Nozzle Park",
          "file": "Configuration.h",
          "category": "recommended",
          "description": "G27 park command",
          "dependencies": [],
          "flashCost": 1500,
          "ramCost": 100,
          "options": {
            "NOZZLE_PARK_POINT": "{ 10, 10, 20 }",
            "NOZZLE_PARK_XY_FEEDRATE": 100,
            "NOZZLE_PARK_Z_FEEDRATE": 5
          }
        }
      ]
    },
    
    "safety": {
      "name": "Safety Features",
      "features": [
        {
          "define": "POWER_LOSS_RECOVERY",
          "name": "Power Loss Recovery",
          "file": "Configuration_adv.h",
          "category": "recommended",
          "description": "Resume print after power failure",
          "dependencies": ["SDSUPPORT"],
          "flashCost": 5000,
          "ramCost": 500,
          "options": {
            "PLR_ENABLED_DEFAULT": false,
            "POWER_LOSS_ZRAISE": 2,
            "POWER_LOSS_PIN": "Pin number if available"
          }
        },
        {
          "define": "PREVENT_COLD_EXTRUSION",
          "name": "Cold Extrusion Prevention",
          "file": "Configuration.h",
          "category": "essential",
          "description": "Block extrusion when cold",
          "options": {
            "EXTRUDE_MINTEMP": { "default": 170, "unit": "Â°C" }
          }
        },
        {
          "define": "PREVENT_LENGTHY_EXTRUDE",
          "name": "Lengthy Extrude Prevention",
          "file": "Configuration.h",
          "category": "recommended",
          "description": "Limit single extrusion length",
          "options": {
            "EXTRUDE_MAXLENGTH": { "default": 200, "unit": "mm" }
          }
        }
      ]
    },
    
    "display": {
      "name": "Display Features",
      "features": [
        {
          "define": "SPEAKER",
          "name": "Speaker/Buzzer",
          "file": "Configuration.h",
          "category": "optional",
          "description": "Enable sound feedback",
          "flashCost": 1500,
          "ramCost": 100
        },
        {
          "define": "LCD_INFO_MENU",
          "name": "LCD Info Menu",
          "file": "Configuration_adv.h",
          "category": "optional",
          "description": "Show printer info in menu",
          "flashCost": 1000,
          "ramCost": 50
        },
        {
          "define": "STATUS_MESSAGE_SCROLLING",
          "name": "Status Message Scrolling",
          "file": "Configuration_adv.h",
          "category": "optional",
          "description": "Scroll long status messages",
          "flashCost": 500,
          "ramCost": 50
        },
        {
          "define": "SCROLL_LONG_FILENAMES",
          "name": "Scroll Long Filenames",
          "file": "Configuration_adv.h",
          "category": "optional",
          "description": "Scroll long file names in SD menu",
          "flashCost": 800,
          "ramCost": 100
        }
      ]
    },
    
    "host": {
      "name": "Host Communication",
      "features": [
        {
          "define": "HOST_ACTION_COMMANDS",
          "name": "Host Action Commands",
          "file": "Configuration_adv.h",
          "category": "recommended",
          "description": "Send action commands to host",
          "flashCost": 2000,
          "ramCost": 100,
          "benefits": ["Better OctoPrint integration", "Pause/resume from LCD"]
        },
        {
          "define": "HOST_PROMPT_SUPPORT",
          "name": "Host Prompt Support",
          "file": "Configuration_adv.h",
          "category": "optional",
          "description": "Prompt dialogs on host",
          "dependencies": ["HOST_ACTION_COMMANDS"],
          "flashCost": 1500,
          "ramCost": 100
        },
        {
          "define": "BINARY_FILE_TRANSFER",
          "name": "Binary File Transfer",
          "file": "Configuration_adv.h",
          "category": "optional",
          "description": "Fast binary file upload",
          "flashCost": 4000,
          "ramCost": 500
        }
      ]
    },
    
    "extras": {
      "name": "Extra Features",
      "features": [
        {
          "define": "NEOPIXEL_LED",
          "name": "NeoPixel LED Support",
          "file": "Configuration.h",
          "category": "optional",
          "description": "Addressable LED strip support",
          "flashCost": 4000,
          "ramCost": 300,
          "options": {
            "NEOPIXEL_TYPE": "NEO_GRB",
            "NEOPIXEL_PIN": "Pin number",
            "NEOPIXEL_PIXELS": "Number of LEDs"
          }
        },
        {
          "define": "CASE_LIGHT_ENABLE",
          "name": "Case Light",
          "file": "Configuration_adv.h",
          "category": "optional",
          "description": "Control case lighting",
          "flashCost": 1500,
          "ramCost": 50
        },
        {
          "define": "CANCEL_OBJECTS",
          "name": "Cancel Objects",
          "file": "Configuration_adv.h",
          "category": "optional",
          "description": "Cancel individual objects in multi-part print",
          "flashCost": 3000,
          "ramCost": 300,
          "requirements": ["Slicer must label objects"]
        },
        {
          "define": "GCODE_REPEAT_MARKERS",
          "name": "G-code Repeat Markers",
          "file": "Configuration_adv.h",
          "category": "optional",
          "description": "Repeat G-code sections",
          "flashCost": 2000,
          "ramCost": 200
        }
      ]
    }
  },
  
  "featureProfiles": {
    "minimal": {
      "name": "Minimal (8-bit boards)",
      "features": [
        "EEPROM_SETTINGS",
        "THERMAL_PROTECTION_HOTENDS",
        "THERMAL_PROTECTION_BED",
        "EMERGENCY_PARSER",
        "SDSUPPORT"
      ]
    },
    "standard": {
      "name": "Standard",
      "features": [
        "EEPROM_SETTINGS",
        "THERMAL_PROTECTION_HOTENDS",
        "THERMAL_PROTECTION_BED",
        "EMERGENCY_PARSER",
        "SDSUPPORT",
        "PIDTEMP",
        "PIDTEMPBED",
        "AUTO_BED_LEVELING_BILINEAR",
        "BLTOUCH",
        "BABYSTEPPING",
        "HOST_KEEPALIVE_FEATURE",
        "HOST_ACTION_COMMANDS",
        "LIN_ADVANCE"
      ]
    },
    "full": {
      "name": "Full Featured (32-bit)",
      "features": [
        "All standard features",
        "AUTO_BED_LEVELING_UBL",
        "INPUT_SHAPING_X",
        "INPUT_SHAPING_Y",
        "POWER_LOSS_RECOVERY",
        "ADVANCED_PAUSE_FEATURE",
        "FILAMENT_RUNOUT_SENSOR",
        "NEOPIXEL_LED",
        "ARC_SUPPORT",
        "CANCEL_OBJECTS",
        "G26_MESH_VALIDATION"
      ]
    }
  }
}