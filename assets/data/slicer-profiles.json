{
  "_comment": "Slicer G-code Templates Database",
  "_lastUpdated": "2024-12-21",
  
  "slicers": {
    "prusaSlicer": {
      "name": "PrusaSlicer / SuperSlicer",
      "variables": {
        "temperature": {
          "first_layer_temperature": "First layer hotend temp",
          "temperature": "Printing hotend temp",
          "first_layer_bed_temperature": "First layer bed temp",
          "bed_temperature": "Printing bed temp"
        },
        "dimensions": {
          "max_print_height": "Z max",
          "bed_shape": "Bed dimensions"
        },
        "filament": {
          "filament_diameter": "Filament diameter",
          "filament_type": "Material type",
          "filament_density": "Material density"
        },
        "printer": {
          "nozzle_diameter": "Nozzle size",
          "printer_model": "Printer name"
        },
        "layer": {
          "layer_z": "Current layer Z",
          "layer_num": "Current layer number"
        }
      }
    },
    "cura": {
      "name": "Ultimaker Cura",
      "variables": {
        "temperature": {
          "material_print_temperature_layer_0": "First layer hotend temp",
          "material_print_temperature": "Printing hotend temp",
          "material_bed_temperature_layer_0": "First layer bed temp",
          "material_bed_temperature": "Printing bed temp"
        },
        "dimensions": {
          "machine_width": "X size",
          "machine_depth": "Y size",
          "machine_height": "Z size"
        },
        "filament": {
          "material_diameter": "Filament diameter"
        },
        "retraction": {
          "retraction_amount": "Retraction distance",
          "retraction_speed": "Retraction speed"
        }
      }
    },
    "ideamaker": {
      "name": "IdeaMaker",
      "variables": {
        "temperature": {
          "{temperature_extruder1}": "Hotend temp",
          "{temperature_heatbed}": "Bed temp"
        }
      }
    }
  },
  
  "startGcode": {
    "basic": {
      "name": "Basic Start G-code",
      "description": "Simple start sequence for most printers",
      "prusaSlicer": [
        "; Start G-code for {printer_model}",
        "M140 S{first_layer_bed_temperature} ; Start bed heating",
        "M104 S{first_layer_temperature} ; Start hotend heating",
        "G28 ; Home all axes",
        "M190 S{first_layer_bed_temperature} ; Wait for bed",
        "M109 S{first_layer_temperature} ; Wait for hotend",
        "G92 E0 ; Reset extruder",
        "G1 Z5 F3000 ; Move Z up"
      ],
      "cura": [
        "; Start G-code",
        "M140 S{material_bed_temperature_layer_0} ; Start bed heating",
        "M104 S{material_print_temperature_layer_0} ; Start hotend heating",
        "G28 ; Home all axes",
        "M190 S{material_bed_temperature_layer_0} ; Wait for bed",
        "M109 S{material_print_temperature_layer_0} ; Wait for hotend",
        "G92 E0 ; Reset extruder",
        "G1 Z5 F3000 ; Move Z up"
      ]
    },
    
    "withLeveling": {
      "name": "Start G-code with Bed Leveling",
      "description": "Includes G29 for auto bed leveling",
      "prusaSlicer": [
        "; Start G-code with ABL",
        "M140 S{first_layer_bed_temperature} ; Start bed heating",
        "M104 S150 ; Preheat hotend (not full temp)",
        "G28 ; Home all axes",
        "M190 S{first_layer_bed_temperature} ; Wait for bed",
        "G29 ; Auto bed level",
        "M104 S{first_layer_temperature} ; Set final hotend temp",
        "G1 X0 Y0 F5000 ; Move to corner",
        "M109 S{first_layer_temperature} ; Wait for hotend",
        "G92 E0 ; Reset extruder"
      ],
      "cura": [
        "; Start G-code with ABL",
        "M140 S{material_bed_temperature_layer_0}",
        "M104 S150",
        "G28",
        "M190 S{material_bed_temperature_layer_0}",
        "G29",
        "M104 S{material_print_temperature_layer_0}",
        "G1 X0 Y0 F5000",
        "M109 S{material_print_temperature_layer_0}",
        "G92 E0"
      ]
    },
    
    "withSavedMesh": {
      "name": "Start G-code with Saved Mesh",
      "description": "Loads saved mesh instead of probing each time",
      "prusaSlicer": [
        "; Start G-code - Load saved mesh",
        "M140 S{first_layer_bed_temperature}",
        "G28 ; Home all axes",
        "M420 S1 Z10 ; Load saved mesh, 10mm fade",
        "M190 S{first_layer_bed_temperature}",
        "M109 S{first_layer_temperature}",
        "G92 E0"
      ],
      "cura": [
        "; Start G-code - Load saved mesh",
        "M140 S{material_bed_temperature_layer_0}",
        "G28",
        "M420 S1 Z10",
        "M190 S{material_bed_temperature_layer_0}",
        "M109 S{material_print_temperature_layer_0}",
        "G92 E0"
      ]
    },
    
    "withUBL": {
      "name": "Start G-code for UBL",
      "description": "UBL load and tilt compensation",
      "prusaSlicer": [
        "; UBL Start G-code",
        "M140 S{first_layer_bed_temperature}",
        "M104 S150",
        "G28",
        "G29 L0 ; Load mesh from slot 0",
        "G29 J ; 3-point tilt adjustment",
        "G29 A ; Activate UBL",
        "M190 S{first_layer_bed_temperature}",
        "M109 S{first_layer_temperature}",
        "G92 E0"
      ]
    },
    
    "withPrimeLine": {
      "name": "Start G-code with Prime Line",
      "description": "Includes purge/prime line at bed edge",
      "prusaSlicer": [
        "; Start G-code with prime line",
        "M140 S{first_layer_bed_temperature}",
        "M104 S{first_layer_temperature}",
        "G28",
        "M190 S{first_layer_bed_temperature}",
        "M109 S{first_layer_temperature}",
        "",
        "; Prime line",
        "G92 E0",
        "G1 Z2.0 F3000",
        "G1 X0.1 Y20 Z0.3 F5000.0",
        "G1 X0.1 Y200.0 Z0.3 F1500.0 E15",
        "G1 X0.4 Y200.0 Z0.3 F5000.0",
        "G1 X0.4 Y20 Z0.3 F1500.0 E30",
        "G92 E0",
        "G1 Z2.0 F3000"
      ],
      "cura": [
        "; Prime line",
        "G92 E0",
        "G1 Z2.0 F3000",
        "G1 X0.1 Y20 Z0.3 F5000.0",
        "G1 X0.1 Y200.0 Z0.3 F1500.0 E15",
        "G1 X0.4 Y200.0 Z0.3 F5000.0",
        "G1 X0.4 Y20 Z0.3 F1500.0 E30",
        "G92 E0",
        "G1 Z2.0 F3000"
      ]
    },
    
    "withLinearAdvance": {
      "name": "Start G-code with Linear Advance",
      "description": "Sets Linear Advance K value per material",
      "prusaSlicer": [
        "; Set Linear Advance based on filament",
        "{if filament_type[0]==\"PLA\"}",
        "M900 K0.06",
        "{elsif filament_type[0]==\"PETG\"}",
        "M900 K0.04",
        "{elsif filament_type[0]==\"ABS\"}",
        "M900 K0.04",
        "{elsif filament_type[0]==\"TPU\"}",
        "M900 K0.0",
        "{else}",
        "M900 K0.05",
        "{endif}"
      ],
      "notes": "Add to end of start G-code. Adjust K values for your setup."
    },
    
    "withPressureAdvance": {
      "name": "Start G-code with Pressure Advance (Klipper)",
      "description": "Klipper-style pressure advance",
      "prusaSlicer": [
        "; Set Pressure Advance based on filament",
        "{if filament_type[0]==\"PLA\"}",
        "SET_PRESSURE_ADVANCE ADVANCE=0.04",
        "{elsif filament_type[0]==\"PETG\"}",
        "SET_PRESSURE_ADVANCE ADVANCE=0.03",
        "{else}",
        "SET_PRESSURE_ADVANCE ADVANCE=0.04",
        "{endif}"
      ],
      "notes": "For Klipper firmware only"
    },
    
    "ender3": {
      "name": "Ender 3 Optimized",
      "description": "Start G-code optimized for Ender 3",
      "prusaSlicer": [
        "; Ender 3 Start G-code",
        "M140 S{first_layer_bed_temperature} ; Start bed heating",
        "M104 S{first_layer_temperature} ; Start hotend heating",
        "",
        "G28 ; Home",
        "",
        "; Load mesh if available, or skip",
        "M420 S1 Z10 ; Enable saved mesh with 10mm fade",
        "",
        "G1 Z5 F3000 ; Raise Z",
        "M190 S{first_layer_bed_temperature} ; Wait for bed",
        "M109 S{first_layer_temperature} ; Wait for hotend",
        "",
        "; Prime line",
        "G92 E0",
        "G1 X0.1 Y20 Z0.28 F5000.0",
        "G1 X0.1 Y200.0 Z0.28 F1500.0 E15",
        "G1 X0.4 Y200.0 Z0.28 F5000.0",
        "G1 X0.4 Y20 Z0.28 F1500.0 E30",
        "G92 E0",
        "G1 Z2.0 F3000",
        "",
        "; Linear Advance",
        "M900 K0.06"
      ],
      "cura": [
        "; Ender 3 Start G-code",
        "M140 S{material_bed_temperature_layer_0}",
        "M104 S{material_print_temperature_layer_0}",
        "G28",
        "M420 S1 Z10",
        "G1 Z5 F3000",
        "M190 S{material_bed_temperature_layer_0}",
        "M109 S{material_print_temperature_layer_0}",
        "G92 E0",
        "G1 X0.1 Y20 Z0.28 F5000.0",
        "G1 X0.1 Y200.0 Z0.28 F1500.0 E15",
        "G1 X0.4 Y200.0 Z0.28 F5000.0",
        "G1 X0.4 Y20 Z0.28 F1500.0 E30",
        "G92 E0",
        "G1 Z2.0 F3000"
      ]
    },
    
    "voron": {
      "name": "Voron Style",
      "description": "Voron-style start with quad gantry level",
      "prusaSlicer": [
        "; Voron Start G-code",
        "M140 S{first_layer_bed_temperature}",
        "M104 S150 ; Preheat nozzle",
        "",
        "G28 ; Home",
        "QUAD_GANTRY_LEVEL ; QGL (if Voron 2.4)",
        "G28 Z ; Re-home Z after QGL",
        "",
        "; Heat soak if needed",
        "M190 S{first_layer_bed_temperature}",
        "",
        "; Bed mesh",
        "BED_MESH_CALIBRATE",
        "",
        "; Final nozzle heat",
        "G1 X175 Y175 Z30 F5000",
        "M109 S{first_layer_temperature}",
        "",
        "; Purge line",
        "PRIME_LINE",
        "",
        "; Ready to print"
      ],
      "notes": "Uses Klipper macros. Adjust for your Voron variant."
    },
    
    "prusaMK3": {
      "name": "Prusa MK3S Style",
      "description": "Prusa-style start G-code",
      "prusaSlicer": [
        "; Prusa MK3S Start",
        "M862.3 P \"[printer_model]\" ; Printer check",
        "M862.1 P[nozzle_diameter] ; Nozzle check",
        "",
        "M115 U3.10.1 ; Tell printer firmware version",
        "",
        "M104 S{first_layer_temperature} ; Set hotend temp",
        "M140 S{first_layer_bed_temperature} ; Set bed temp",
        "M109 S{first_layer_temperature} ; Wait for hotend",
        "M190 S{first_layer_bed_temperature} ; Wait for bed",
        "",
        "G28 W ; Home without mesh",
        "G80 ; Mesh bed leveling",
        "",
        "G1 Y-3.0 F1000.0 ; Go outside print area",
        "G92 E0.0",
        "G1 X60.0 E9.0 F1000.0 ; Intro line",
        "G1 X100.0 E12.5 F1000.0",
        "G92 E0.0"
      ],
      "notes": "Prusa-specific codes (G80, M862). For Prusa firmware."
    }
  },
  
  "endGcode": {
    "basic": {
      "name": "Basic End G-code",
      "description": "Simple end sequence",
      "prusaSlicer": [
        "; End G-code",
        "G91 ; Relative positioning",
        "G1 E-2 F2700 ; Retract",
        "G1 E-2 Z0.2 F2400 ; Retract and raise Z",
        "G1 X5 Y5 F3000 ; Wipe",
        "G1 Z10 ; Raise Z more",
        "G90 ; Absolute positioning",
        "",
        "G1 X0 Y{print_bed_max[1]*0.8} F3000 ; Present print",
        "",
        "M106 S0 ; Fan off",
        "M104 S0 ; Hotend off",
        "M140 S0 ; Bed off",
        "",
        "M84 X Y E ; Disable steppers (keep Z)"
      ],
      "cura": [
        "; End G-code",
        "G91",
        "G1 E-2 F2700",
        "G1 E-2 Z0.2 F2400",
        "G1 X5 Y5 F3000",
        "G1 Z10",
        "G90",
        "G1 X0 Y220 F3000",
        "M106 S0",
        "M104 S0",
        "M140 S0",
        "M84 X Y E"
      ]
    },
    
    "withCooldown": {
      "name": "End G-code with Partial Cooldown",
      "description": "Waits for partial cooldown before turning off",
      "prusaSlicer": [
        "; End G-code with cooldown",
        "G91",
        "G1 E-2 F2700",
        "G1 Z10 F3000",
        "G90",
        "G1 X0 Y200 F3000",
        "",
        "M104 S0 ; Hotend off",
        "M140 S0 ; Bed off",
        "M106 S255 ; Fan full to cool hotend",
        "",
        "; Wait for hotend to cool below 50C",
        "M109 R50 ; Wait to cool to 50C",
        "",
        "M106 S0 ; Fan off",
        "M84 ; Motors off"
      ]
    },
    
    "withSound": {
      "name": "End G-code with Sound",
      "description": "Plays sound when print complete",
      "prusaSlicer": [
        "; End G-code with sound",
        "G91",
        "G1 E-2 F2700",
        "G1 Z10 F3000",
        "G90",
        "G1 X0 Y200 F3000",
        "",
        "M104 S0",
        "M140 S0",
        "M106 S0",
        "",
        "; Play tune",
        "M300 S1000 P200",
        "M300 S0 P100",
        "M300 S1500 P200",
        "M300 S0 P100",
        "M300 S2000 P300",
        "",
        "M84"
      ]
    },
    
    "ender3": {
      "name": "Ender 3 End G-code",
      "description": "Optimized for Ender 3",
      "prusaSlicer": [
        "; Ender 3 End G-code",
        "G91 ; Relative",
        "G1 E-2 F2700 ; Retract",
        "G1 E-2 Z0.2 F2400 ; Retract + lift",
        "G1 X5 Y5 F3000 ; Wipe",
        "G1 Z10 ; Lift",
        "G90 ; Absolute",
        "",
        "G1 X0 Y220 F3000 ; Present",
        "",
        "M104 S0 ; Hotend off",
        "M140 S0 ; Bed off",
        "M107 ; Fan off",
        "",
        "; Beep",
        "M300 S1000 P500",
        "",
        "M84 ; Motors off"
      ],
      "cura": [
        "G91",
        "G1 E-2 F2700",
        "G1 E-2 Z0.2 F2400",
        "G1 X5 Y5 F3000",
        "G1 Z10",
        "G90",
        "G1 X0 Y220 F3000",
        "M104 S0",
        "M140 S0",
        "M107",
        "M300 S1000 P500",
        "M84"
      ]
    }
  },
  
  "layerChangeGcode": {
    "timelapse": {
      "name": "Timelapse Layer Change",
      "description": "Park nozzle for timelapse photo",
      "prusaSlicer": [
        "; Layer change - timelapse",
        "G91 ; Relative",
        "G1 E-0.5 F2700 ; Retract slightly",
        "G1 Z0.5 F3000 ; Lift slightly",
        "G90 ; Absolute",
        "G1 X{print_bed_max[0]} Y{print_bed_max[1]} F9000 ; Go to back corner",
        "G4 P500 ; Wait 500ms for photo",
        "; Return handled by slicer"
      ]
    },
    "progressReport": {
      "name": "Progress Report",
      "description": "Report layer progress to host",
      "prusaSlicer": [
        "; Layer [layer_num]",
        "M117 Layer {layer_num} / {total_layer_count}",
        "M73 P{((layer_num / total_layer_count) * 100) | int}"
      ]
    }
  },
  
  "toolChangeGcode": {
    "mmu2": {
      "name": "Prusa MMU2 Tool Change",
      "description": "Tool change for MMU2",
      "prusaSlicer": [
        "; Tool change to T[next_extruder]",
        "T[next_extruder]"
      ]
    },
    "dualExtruder": {
      "name": "Dual Extruder Tool Change",
      "description": "Simple dual extruder change",
      "prusaSlicer": [
        "; Tool change",
        "G91 ; Relative",
        "G1 E-2 F2700 ; Retract current",
        "G90 ; Absolute",
        "T[next_extruder] ; Switch tool",
        "G1 E2 F2700 ; Prime new tool"
      ]
    }
  },
  
  "colorChangeGcode": {
    "M600": {
      "name": "M600 Color Change",
      "description": "Standard M600 filament change",
      "gcode": [
        "; Color change",
        "M600 ; Trigger filament change"
      ],
      "requires": "ADVANCED_PAUSE_FEATURE"
    }
  },
  
  "beforeLayerGcode": {
    "fanControl": {
      "name": "Fan Control by Layer",
      "description": "Adjust fan based on layer",
      "prusaSlicer": [
        "{if layer_num == 1}",
        "M106 S0 ; No fan for first layer",
        "{elsif layer_num == 2}",
        "M106 S128 ; 50% fan for second layer",
        "{elsif layer_num >= 3}",
        "M106 S255 ; Full fan after",
        "{endif}"
      ]
    }
  }
}